<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="../../css/fonts.css">
    <title>Iris Dataset</title>
    <!--<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"> </script> -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"> </script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"> </script> -->
    <style>
        body,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: "Segoe UI Bold", Arial, Helvetica, sans-serif
        }
    </style>
</head>

<body class="w3-xlarge">
    <div class="w3-top">
        <div class="w3-bar w3-padding w3-card"
            style="letter-spacing:4px; background-color: rgb(115, 183, 97) !important; color: white;">
            <div class="w3-content">
                <span class="w3-bar-item cu" id="back">Iris Dataset</span>
            </div>
        </div>
    </div>
    <div class="w3-container w3-content" style="padding-top: 100px;">

        <div class="w3-center">
<<<<<<< HEAD
            <!----> <iframe title="iris" width="948" height="612"
                src="https://app.powerbi.com/view?r=eyJrIjoiMTIxMzNmMjYtNjg3YS00Yzk2LTliN2EtNDk2NGZiOGRjMWIxIiwidCI6Ijg1ODdlOTVkLTU2ZWItNGU4NC1hMTcxLWFmM2RhODBiNGY0ZiJ9"
                frameborder="0" allowFullScreen="true"></iframe> 
=======
            <!-- <iframe title="iris" width="948" height="612"
                src="https://app.powerbi.com/view?r=eyJrIjoiMTIxMzNmMjYtNjg3YS00Yzk2LTliN2EtNDk2NGZiOGRjMWIxIiwidCI6Ijg1ODdlOTVkLTU2ZWItNGU4NC1hMTcxLWFmM2RhODBiNGY0ZiJ9"
                frameborder="0" allowFullScreen="true"></iframe> -->
>>>>>>> 26aef3e9daca75d5e7b11f1fcbab50b3537f81a9
        

            <br>

            <div class="w3-card w3-container w3-medium w3-padding-32" style="margin-top: 25px;">
                <div class="w3-row-padding w3-left-align">
                    <div class="w3-col m6 s6 l6">
                        <label>PetalLength</label>
                        <input class="w3-input w3-border" type="text" placeholder="1.4" id="a" value="4.30">
                        <br>
                        <label>SepalLength</label>
                        <input class="w3-input w3-border" type="text" placeholder="5.1" id="b" value="6.4">
                    </div>
                    <div class="w3-col m6 s6 l6">
                        <label>PetalWith</label>
                        <input class="w3-input w3-border" type="text" placeholder="0.2" id="c" value="1.3">
                        <br>
                        <label>SepalWith</label>
                        <input class="w3-input w3-border" type="text" placeholder="3.5" id="d" value="2.9">
                    </div>
                </div>
                <div style="padding-top: 25px;">
                    <button id="boton" class="w3-button w3-round w3-black" style="background-color: rgb(74, 88, 138) !important;" onclick="doIris()">Predecir</button>
                </div>
            </div>

        </div>

        <br>
        <div id="respuesta" class="w3-large"></div>
        <br>

        <h1>Visualizando Dataset Iris con Power BI y Modelo de Machine Learning</h1>
        <div class="w3-text-grey">
            <p>Como primer experimento, me gustar铆a combinar el poder de visualizaci贸n de datos de Power BI con el potencial del machine learning. Para lograrlo, he seleccionado la conocida base de datos iris, la cual es com煤nmente utilizada como el primer ejercicio de machine learning en la ciencia de datos, algo as铆 como el "Hola mundo" en este campo.</p>
            <p>Mi objetivo es crear un dashboard din谩mico y f谩cil de utilizar en Power BI, mientras aprendo acerca de machine learning y redes neuronales. Este ser谩 el primero de varios sets de datos que abordar茅, cada uno con mayor complejidad que el anterior. 隆As铆 que comencemos!</p>
        </div>
        <h1>Visualizaciones</h1>
        <div class="w3-text-grey">
            <p>Para evitar sobrecargar la visualizaci贸n con demasiadas gr谩ficas, me concentr茅 en la propiedad "petal length" al realizar la visualizaci贸n de datos. Como se puede apreciar en la tabla de datos, esta propiedad es la m谩s significativa a la hora de diferenciar los datos, ya que tiene una relaci贸n lineal con el tipo de iris.</p>
            <p>En las visualizaciones se puede observar claramente los cl煤ster o agrupaciones por clases, lo que indica que se trata de un modelo de clasificaci贸n en lugar de uno de regresi贸n. Adem谩s, en este dataset, los cl煤ster est谩n claramente definidos, lo que facilitar谩 el agrupamiento para los algoritmos de machine learning.</p>
            <p>Tambi茅n agregu茅 histogramas para visualizar la distribuci贸n de los datos a lo largo del eje x "petal length" y detectar si hab铆a alguna distribuci贸n que pudiera aportar m谩s informaci贸n para la clasificaci贸n de los datos, pero no se observ贸 nada significativo.</p>
            <p>Por 煤ltimo, incorpor茅 un gr谩fico de radar para reflejar las diferencias en la propiedad "petal length" de cada clase de iris.</p>
            <p>En conclusi贸n, esta visualizaci贸n ofrece una vista panor谩mica de los datos iris, haciendo hincapi茅 en la propiedad "petal length", que representa muy bien la clasificaci贸n. Gracias a Power BI, fue muy f谩cil realizar este tipo de visualizaciones sin necesidad de escribir l铆neas de c贸digo, y se puede compartir como un reporte o insertarlo en un sitio web, como en nuestro caso.</p>
        </div>
        <h1>Modelo Machine Learning</h1>
        <div class="w3-text-grey">
            <p>El siguiente paso en este ejercicio fue aplicar el machine learning. </p>
            <p>Inicialmente, intent茅 elaborarlo en Python, pero no pude desplegar el modelo para que funcionara en la web. Aunque intent茅 utilizar Heroku, no pude lograrlo . Espero poder hacerlo en la pr贸xima oportunidad.</p>
            <p>Para solucionar el problema de tener un modelo funcional, opt茅 por utilizar TensorFlow.js, ya que funciona en JavaScript y vi una oportunidad para desplegar el modelo de manera m谩s f谩cil. Y as铆 fue.</p>
            <p>No profundizar茅 en el uso de TensorFlow ni en la implementaci贸n del ejercicio con iris, ya que no es el alcance de esta publicaci贸n. En internet hay mucho material sobre el dataset iris y su implementaci贸n en diferentes lenguajes y plataformas.</p>
            <p>En resumen, se utiliz贸 una peque帽a red neuronal de 10 neuronas (sigmoide) y 3 neuronas de salida (softmax), con un learning rate de 0.01 y 40 epochs, lo que result贸 en una precisi贸n del modelo del 99%.</p>
            <p>El resultado fue una combinaci贸n de Power BI para las visualizaciones y el uso de TensorFlow para el modelo y la predicci贸n de datos, totalmente funcional.</p>
            <p>Si necesitas m谩s informaci贸n, no dudes en contactarme:</p>
            <p>Correo: aivan.alvarez@gmail.com</p>
            <p><a href="https://wa.me/+584262488793" target="_blank" style="text-decoration: none;">Whatsapp: +58 4262488793</a></p>
        </div>



    </div>
    <br><br>

    <script>

        async function doIris(){
<<<<<<< HEAD
            
            // take values
            let a = Number(document.getElementById('a').value);
            let b = Number(document.getElementById('b').value);
            let c = Number(document.getElementById('c').value);
            let d = Number(document.getElementById('d').value);
            let elemento = document.getElementById('boton');
            let res = document.getElementById('respuesta');
            let arr = [b, d, a, c];
            console.log(arr);

            elemento.classList.add('w3-disabled');

            const model = await tf.loadLayersModel('https://ivanation.github.io/art/iris/iris_modelo/model.json');
            const input = tf.tensor2d([b, d, a, c], [1, 4]);
=======
            console.log('doIris');
            const modelUrl = 'https://ivanation.github.io/art/iris/iris_modelo/model.json'; 
            const model = await tf.loadLayersModel(modelUrl);

            // prepare input
            //const input = tf.tensor2d([4.4, 3.2, 1.3, 0.2], [1, 4]);
            const data = [[4.4, 3.2, 1.3, 0.2]];
            const input = tf.tensor2d(data, [1, 4]);

            // make a prediction probabilities  
>>>>>>> 26aef3e9daca75d5e7b11f1fcbab50b3537f81a9
            const prediction = model.predict(input);
            const arrp = await prediction.array();
            const flatArrp = arrp.flat();
            const valorMaximo = Math.max(...flatArrp);
            const posicionMaximo = flatArrp.indexOf(valorMaximo);
            console.log(valorMaximo, posicionMaximo);
            console.log(arrp);

            tipo = ""
            if (posicionMaximo == 0) {
                tipo = "Iris Setosa"
            } else if (posicionMaximo == 1) {
                tipo = "Iris Versicolor"
            } else if (posicionMaximo == 2) {
                tipo = "Iris Virginica"
            }

            res.innerHTML = '<div class="w3-panel w3-card w3-green w3-display-container"><span onclick="this.parentElement.style.display=' + "'none'"+
                            '" class="w3-button w3-large w3-display-topright">&times;</span><h3>Predicci贸n</h3>'+
                            '<p>'+tipo+' , Probabilidad: '+valorMaximo.toFixed(2)+'</p></div>'
            elemento.classList.remove('w3-disabled');

<<<<<<< HEAD
=======
            // make a prediction answer
            // const predictionMax = model.predict(input).argMax(-1).dataSync();
            // console.log(predictionMax);
>>>>>>> 26aef3e9daca75d5e7b11f1fcbab50b3537f81a9
        }

    </script>

</body>

</html>